/* Responsive — All @media queries consolidated */

@media (max-width: 768px) {
    /* Chat mobile */
    .support-container {
        padding: 1rem;
        height: calc(100vh - 160px);
    }

    .mona-avatar-header { width: 56px; height: 56px; }
    .mona-avatar-ring { margin: -0.3rem 0; }
    .mona-status-dot { width: 10px; height: 10px; bottom: 2px; right: 2px; }
    .chat-header h3 { font-size: 1.05rem; }
    .chat-header { padding: 0.5rem 1rem; }

    .chat-message {
        max-width: 90%;
    }

    .mona-avatar-msg { width: 36px; height: 36px; }

    .quick-prompts {
        padding: 0.6rem 1rem;
        gap: 0.4rem;
    }

    .quick-prompt-btn {
        font-size: 0.78rem;
        padding: 0.35rem 0.75rem;
    }

    .toolkit-bar { padding: 0.4rem 1rem; }
    .toolkit-toggle { font-size: 0.78rem; padding: 0.35rem 0.85rem; }

    .guided-exercises {
        padding: 0.5rem 1rem;
        gap: 0.4rem;
    }

    .exercise-btn {
        padding: 0.4rem 0.75rem;
        font-size: 0.75rem;
    }

    .typing-label { font-size: 0.75rem; }

    /* General mobile */
    nav { padding: 1rem 1.5rem; }

    .nav-links {
        display: none;
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background: rgba(250, 246, 240, 0.97);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        flex-direction: column;
        padding: 1.25rem 1.5rem;
        gap: 0.25rem;
        border-bottom: 1px solid var(--sand);
    }

    .nav-links.open { display: flex; }

    .mobile-menu-btn { display: block; }

    /* Mobile dropdown accordion */
    .nav-dropdown-trigger {
        width: 100%;
        text-align: left;
        padding: 0.5rem 0;
    }

    .nav-chevron { margin-left: auto; }

    .nav-dropdown {
        position: static !important;
        transform: none !important;
        background: transparent !important;
        backdrop-filter: none !important;
        -webkit-backdrop-filter: none !important;
        border: none !important;
        box-shadow: none !important;
        border-radius: 0 !important;
        padding: 0 !important;
        min-width: auto !important;
        opacity: 1 !important;
        visibility: visible !important;
        pointer-events: auto !important;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease;
    }

    .nav-dropdown::before { display: none; }

    .has-dropdown.open > .nav-dropdown {
        max-height: 200px;
    }

    .nav-dropdown li a {
        padding: 0.45rem 0 0.45rem 2.25rem;
        font-size: 0.85rem;
        color: var(--sage-dark);
    }

    .nav-links > li > a {
        padding: 0.5rem 0;
    }

    .hero { padding: 2rem 1.5rem; }
    .hero h1 { font-size: 2.5rem; }

    .jft-container, .gratitude-container, .journal-container, .resources-container, .urge-container, .rpp-container { padding: 1.5rem; }
    .jft-card, .gratitude-input-section, .journal-editor { padding: 1.5rem; }
    .page-header h2 { font-size: 2rem; }
    .share-link-container { flex-direction: column; }
    .auth-card { padding: 2rem 1.5rem; }
    .avatar-dropdown { right: -0.5rem; min-width: 220px; }
    .wall-feed { columns: 1; }
    .community-container { padding: 1.5rem; }
    .fellowship-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1rem; }
    .fellowship-card { padding: 1.5rem; }
    .fellowship-badge { width: 48px; height: 48px; font-size: 0.9rem; }
    .fellowship-card h3 { font-size: 1.25rem; }
    .fellowship-header { flex-direction: column; text-align: center; padding: 1.5rem; }
    .fellowship-header-badge { width: 44px; height: 44px; font-size: 0.85rem; }
    .streak-badges { gap: 0.5rem; }
    .milestone-badge { width: 55px; height: 55px; font-size: 1.2rem; }
    .mood-timeline { flex-wrap: wrap; }
    .checkin-widget { padding: 1.5rem; margin: 1.5rem 0.5rem; }

    /* Meditation mobile */
    .med-close-btn, .med-mute-btn {
        width: 40px; height: 40px;
        top: 1rem;
        font-size: 1rem;
    }
    .med-close-btn { right: 1rem; }
    .med-mute-btn { left: 1rem; }
    .med-phase-label { top: 1.2rem; font-size: 0.75rem; }
    .breathing-orb { width: 120px; height: 120px; }
    .breathing-ring { width: 220px; height: 220px; }
    .grounding-step { padding: 1.75rem 1.5rem; }
    .grounding-icon { font-size: 2.5rem; }
    .bodyscan-figure { max-height: 45vh; }
    .med-instruction { font-size: 1.2rem; }

    /* Privacy mobile */
    .privacy-container { padding: 1.5rem; }
    .privacy-card { padding: 2rem 1.5rem; }
    .privacy-section h3 { font-size: 1.2rem; }
    .privacy-table { font-size: 0.8rem; }
    .privacy-table th, .privacy-table td { padding: 0.5rem 0.75rem; }

    /* Events page mobile */
    .events-container { padding: 1.5rem; }
    .event-featured { grid-template-columns: 1fr; }
    .event-flyer { max-width: 100%; }
    .event-flyer img { border-radius: 24px 24px 0 0; }
    .event-details { padding: 1.5rem; }
    .event-details h3 { font-size: 1.3rem; }
    .featured-event { flex-direction: column; text-align: center; padding: 1.25rem; }
    .featured-event-content h3 { font-size: 0.95rem; }
    .community-pinned-event { gap: 0.75rem; padding: 0.75rem 1rem; }
    .pinned-event-thumb { width: 48px; height: 48px; }
    .pinned-event-info strong { font-size: 0.85rem; }

    /* Wellness page mobile */
    .wellness-container { padding: 1.5rem; }
    .wellness-grid { grid-template-columns: 1fr; gap: 1rem; }
    .wellness-card { padding: 1.5rem; }
    .wellness-badge { width: 44px; height: 44px; }
    .wellness-badge svg { width: 22px; height: 22px; }
    .wellness-card h3 { font-size: 1.15rem; }

    /* Metta circles on small screens */
    .metta-visual { width: 150px; height: 150px; }
    .metta-heart { font-size: 2rem; }

    /* Visualization orb */
    .viz-orb { width: 60px; height: 60px; }

    /* Urge Log mobile */
    .urge-container { padding: 1.5rem; }
    .urge-summary { flex-direction: column; gap: 0.75rem; padding: 1.25rem; }
    .urge-stat { min-width: auto; }
    .intensity-selector { gap: 0.5rem; }
    .intensity-btn { width: 34px; height: 34px; font-size: 0.8rem; }
    .trigger-grid { gap: 0.4rem; }
    .trigger-btn { font-size: 0.78rem; padding: 0.4rem 0.85rem; }
    .urge-actions { flex-direction: column; align-items: stretch; }
    .urge-actions .btn { width: 100%; }
    .urge-surf-link { justify-content: center; }
    .urge-entry-header { flex-wrap: wrap; gap: 0.5rem; }
    .urge-entry-meta { flex: 1 1 100%; order: 3; }

    /* Safety Plan mobile */
    .rpp-container { padding: 1.5rem; }
    .rpp-section { padding: 1.5rem; margin-bottom: 1rem; }
    .rpp-section-header { gap: 0.75rem; }
    .rpp-section-icon { width: 36px; height: 36px; }
    .rpp-section-icon svg { width: 18px; height: 18px; }
    .rpp-section-header h3 { font-size: 1.1rem; }
    .rpp-section-desc { font-size: 0.8rem; }
    .rpp-add-row { flex-direction: column; }
    .rpp-add-row-contact { flex-direction: column; }
    .rpp-phone-input { max-width: 100%; }
    .rpp-edit-actions { flex-direction: column; }
    .rpp-edit-actions .btn { width: 100%; text-align: center; }
    .rpp-contact-item { flex-direction: column; align-items: flex-start; }
    .rpp-contact-phone { align-self: flex-start; }
    .rpp-crisis-banner { font-size: 0.82rem; padding: 0.6rem 1rem; border-radius: 10px; }
    .rpp-reorder-btns { gap: 0.15rem; }
    .rpp-move-btn { width: 32px; height: 32px; }

    /* Safety Plan journey overlay mobile */
    .rpp-intro-card { padding: 2rem 1.5rem; }
    .rpp-intro-icon { width: 64px; height: 64px; }
    .rpp-intro-card h3 { font-size: 1.4rem; }
    .rpp-journey-close { width: 40px; height: 40px; top: 1rem; right: 1rem; font-size: 1rem; }
    .rpp-journey-step-wrapper { padding: 0 1rem; }
    .rpp-journey-icon { width: 56px; height: 56px; }
    .rpp-journey-icon svg { width: 26px; height: 26px; }
    .rpp-journey-question { font-size: 1.3rem; }
    .rpp-journey-subtitle { font-size: 0.88rem; }
    .rpp-journey-input { padding: 0.75rem 1rem; font-size: 0.88rem; }
    .rpp-journey-add-btn { padding: 0.75rem 1.25rem; font-size: 0.85rem; }
    .rpp-journey-contact-row { flex-direction: column; }
    .rpp-journey-contact-row .rpp-journey-input.phone-input { flex: 1; }
    .rpp-journey-pill { font-size: 0.82rem; padding: 0.4rem 0.85rem; }
    .rpp-journey-nav { flex-direction: column-reverse; gap: 0.5rem; }
    .rpp-journey-nav-btn { width: 100%; text-align: center; }
    .rpp-journey-dot { width: 8px; height: 8px; }
    .rpp-journey-progress { gap: 0.4rem; }
    .rpp-journey-complete h3 { font-size: 1.5rem; }
    .rpp-walkthrough-again { font-size: 0.82rem; padding: 0.55rem 1.25rem; }

    /* Shared gratitude mobile */
    .shared-card { padding: 1.5rem; }
    .shared-card .btn {
        display: block;
        text-align: center;
        padding: 0.85rem 1.25rem;
        border-radius: 16px;
        font-size: 0.9rem;
    }

    /* Profile page mobile */
    .profile-container { padding: 1.5rem; }
    .profile-card { padding: 1.5rem; }
    .profile-card-header h3 { font-size: 1.1rem; }
    .profile-card-desc { font-size: 0.8rem; }
    .profile-card-icon { width: 36px; height: 36px; }
    .profile-card-icon svg { width: 18px; height: 18px; }
    .profile-avatar-circle { width: 64px; height: 64px; font-size: 1.6rem; }
    .profile-icon-grid { grid-template-columns: repeat(4, 1fr); gap: 0.5rem; }
    .profile-icon-btn svg { width: 24px; height: 24px; }
    .profile-a11y-row { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
    .profile-font-size-btns { align-self: flex-start; }
    .profile-toggle { align-self: flex-start; }
    .profile-crop-actions { flex-direction: column; }
    .profile-crop-actions .btn { width: 100%; text-align: center; }
    .profile-save-btn { width: 100%; }

    /* Accessibility: mobile heading sizes */
    body.font-large .page-header h2 { font-size: 2.25rem; }
    body.font-x-large .page-header h2 { font-size: 2.5rem; }

    /* Cookie banner mobile */
    .cookie-banner { padding: 1rem 1.25rem; }
    .cookie-banner-content { flex-direction: column; text-align: center; gap: 1rem; }
    .cookie-banner-content p { font-size: 0.82rem; }
    .cookie-banner-actions { justify-content: center; }

    /* Guest showcase mobile */
    .showcase-heading { font-size: 1.4rem; }
    .showcase-subheading { font-size: 0.95rem; }
    .showcase-grid { grid-template-columns: 1fr; gap: 1rem; }
    .showcase-card { padding: 1.25rem; }
    .showcase-card-icon { font-size: 1.75rem; }
    .showcase-cta .btn-lg { width: 100%; padding: 0.9rem 1.5rem; font-size: 1rem; }

    /* What's New panel mobile */
    .whats-new-panel { width: 100vw; }

    /* Community Hub mobile — sidebar becomes horizontal/stacked */
    .community-layout {
        grid-template-columns: 1fr;
    }
    .community-sidebar {
        position: relative;
        top: 0;
    }
    .community-sidebar-nav {
        width: 100%;
    }
    .milestone-card, .medallion-card, .gratitude-feed-card { padding: 1.25rem; border-radius: 16px; }
    .milestone-card-achievement { padding: 0.75rem; }
    .milestone-card-icon { font-size: 1.5rem; }
    .milestone-card-label { font-size: 1rem; }
    .medallion-invite-form .form-row { grid-template-columns: 1fr; }
    .medallion-invite-form { padding: 1.25rem; }
    .sponsor-badge { font-size: 0.55rem; }

    /* Notification panel mobile */
    .notification-panel {
        width: 100vw;
    }

    /* Public profile mobile */
    .public-profile-container {
        padding: 1.5rem;
    }

    .public-profile-hero {
        flex-direction: column;
        text-align: center;
        padding: 1.5rem;
    }

    .public-profile-hero-info {
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .public-profile-badges {
        justify-content: center;
    }

    .public-profile-card {
        padding: 1.25rem;
    }

    .public-profile-milestones-grid {
        justify-content: center;
    }

    .public-profile-section {
        padding: 1.25rem;
    }

    /* Partner cards mobile */
    .partner-card-actions {
        flex-direction: row;
    }

    .partner-request-actions {
        flex-direction: row;
    }

    .public-profile-actions-row {
        flex-direction: column;
    }

    /* Onboarding mobile */
    .onboarding-features {
        grid-template-columns: 1fr;
        max-width: 280px;
        margin: 1.5rem auto;
    }

    .onboarding-fellowship-grid {
        grid-template-columns: repeat(2, 1fr);
    }

    .onboarding-color-grid,
    .onboarding-icon-grid {
        grid-template-columns: repeat(5, 1fr);
        max-width: 280px;
    }

    .onboarding-summary {
        grid-template-columns: 1fr;
    }

    .onboarding-nudge {
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
    }

    .onboarding-nudge-content {
        flex-direction: column;
    }

    .onboarding-question {
        font-size: 1.35rem;
    }

    .onboarding-step-wrapper {
        padding: 0 1rem;
    }

    /* Dark mode mobile nav */
    body.dark-mode .nav-links {
        background: rgba(28, 23, 20, 0.97);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
    }
}
